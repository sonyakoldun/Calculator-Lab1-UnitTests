# Лабораторна робота №4
## Тестування продуктивності веб-додатків за допомогою Apache JMeter

---

## 1. Тема роботи

Тестування продуктивності веб-додатків за допомогою Apache JMeter. Дослідження продуктивності веб-сайту https://ffl.org.ua/ під різними навантаженнями.

---

## 2. Мета роботи

Оволодіти навичками налаштування та виконання тестів продуктивності за допомогою Apache JMeter. Навчитися:
- Створювати тест-плани для тестування веб-додатків
- Налаштовувати різні сценарії навантаження (smoke, baseline, stress)
- Аналізувати результати тестування через агреговані звіти та HTML-дашборди
- Інтерпретувати ключові метрики продуктивності (час відповіді, пропускна здатність, частота помилок)

---

## 3. Короткі теоретичні відомості

### Apache JMeter

Apache JMeter — це інструмент з відкритим кодом для тестування продуктивності та навантаження, розроблений Apache Software Foundation. JMeter призначений для тестування веб-додатків, веб-сервісів, баз даних та інших сервісів.

### Основні компоненти JMeter

**Test Plan (Тест-план)** — кореневий елемент, що містить всю конфігурацію тесту. Він включає Thread Groups, Samplers, Listeners, Timers, Assertions та інші компоненти.

**Thread Group (Група потоків)** — визначає кількість одночасних користувачів (threads), час розгону (ramp-up period) та кількість ітерацій. Кожен потік імітує одного користувача.

**Samplers (Семплери)** — елементи, що виконують запити до сервера. Найпоширеніший — HTTP Request Sampler для веб-додатків.

**Listeners (Слухачі)** — компоненти для збору та відображення результатів:
- **View Results Tree**: детальний перегляд кожного запиту (використовується тільки для налагодження)
- **Summary Report**: зведена статистика
- **Aggregate Report**: агрегована статистика з процентилями
- **HTML Dashboard**: інтерактивний HTML-звіт

**Timers (Таймери)** — додають затримки між запитами для більш реалістичного імітування поведінки користувача.

**Assertions (Перевірки)** — валідують відповіді сервера (код статусу, час відповіді, вміст).

**HTTP Request Defaults** — налаштування за замовчуванням для всіх HTTP-запитів (протокол, домен, порт).

**HTTP Cookie Manager** — автоматично керує cookies, як у реальному браузері.

**HTTP Cache Manager** — імітує кешування браузера.

**HTTP Header Manager** — додає HTTP-заголовки до запитів (наприклад, User-Agent).

### Формати результатів

**JTL (JMeter Test Log)** — XML-формат для зберігання результатів тестування. Може бути перетворений у HTML-дашборд.

**HTML Dashboard** — інтерактивний звіт, що генерується з JTL-файлу. Включає графіки, таблиці та статистику.

### Ключові метрики продуктивності

**Response Time (Час відповіді)** — час від надсилання запиту до отримання повної відповіді:
- **Average**: середній час відповіді
- **Min/Max**: мінімальний та максимальний час
- **90th/95th Percentile**: час, нижче якого знаходяться 90%/95% запитів

**Throughput (Пропускна здатність)** — кількість запитів, оброблених за секунду (requests/second). Показує продуктивність системи.

**Error Rate (Частота помилок)** — відсоток невдалих запитів. Високий рівень помилок вказує на проблеми з продуктивністю або стабільністю.

**Concurrent Users (Одночасні користувачі)** — кількість потоків, що виконуються одночасно.

**Latency (Затримка)** — час до отримання першого байта відповіді.

---

## 4. Хід роботи

### 4.1. Встановлення Apache JMeter

На macOS використовувався Homebrew для встановлення:

```bash
brew install jmeter
```

Перевірка встановлення:
```bash
jmeter --version
```

Альтернативний спосіб — завантажити архів з офіційного сайту https://jmeter.apache.org/download_jmeter.cgi та розпакувати.

### 4.2. Вибір ендпоінтів для тестування

Було проаналізовано веб-сайт https://ffl.org.ua/ та вибрано 6 стабільних публічних сторінок, що не вимагають авторизації:

1. **Головна сторінка**: https://ffl.org.ua/ (path: /)
2. **Сторінка новин**: https://ffl.org.ua/news (path: /news)
3. **FAQ**: https://ffl.org.ua/questions/faq (path: /questions/faq)
4. **Сторінка опитувань**: https://ffl.org.ua/questions (path: /questions)
5. **Контакти**: https://ffl.org.ua/pages/66 (path: /pages/66)
6. **Відеогалерея**: https://ffl.org.ua/media/video (path: /media/video)

Всі ендпоінти задокументовані у файлі `Notes/endpoints.md`.

### 4.3. Створення тест-плану

Було створено тест-план `Lab4_ffl_performance.jmx` з такими компонентами:

**Налаштування за замовчуванням:**
- **HTTP Request Defaults**: протокол=https, домен=ffl.org.ua
- **HTTP Cookie Manager**: автоматичне керування cookies
- **HTTP Cache Manager**: імітація кешування браузера
- **HTTP Header Manager**: встановлення User-Agent (Mozilla/5.0...)

**HTTP-запити:**
- Шість HTTP Request Samplers для кожного ендпоінта
- Увімкнено "Follow Redirects" для коректної обробки редиректів (301/302)
- Увімкнено "Use KeepAlive" для ефективності

**Assertions:**
- Response Code Assertion для перевірки HTTP статусу 200 на кожному запиті

### 4.4. Налаштування сценаріїв тестування

#### 4.4.1. Сценарій 01_SMOKE

**Мета**: Перевірка коректності роботи тест-плану.

**Параметри:**
- Кількість потоків (користувачів): 1
- Час розгону (Ramp-up): 1 секунда
- Кількість ітерацій: 1

**Listeners:**
- View Results Tree (для детального перегляду)
- Summary Report

**Результат**: Всі запити успішно виконані, статус-коди 200.

#### 4.4.2. Сценарій 02_BASELINE

**Мета**: Встановлення базової лінії продуктивності системи.

**Параметри:**
- Кількість потоків: 10
- Час розгону: 25 секунд
- Тривалість тесту: 90 секунд (використано Scheduler)

**Listeners:**
- Summary Report
- Aggregate Report

**Результати збережено**: `JMeter/Results/baseline_results.jtl`

#### 4.4.3. Сценарій 03_STRESS_LIGHT

**Мета**: Легке навантаження для виявлення деградації продуктивності.

**Параметри:**
- Кількість потоків: 25
- Час розгону: 60 секунд
- Тривалість тесту: 120 секунд (використано Scheduler)

**Listeners:**
- Summary Report
- Aggregate Report

**Результати збережено**: `JMeter/Results/stress_results.jtl`

### 4.5. Виконання тестів

#### Режим GUI (для налагодження SMOKE)

1. Запуск JMeter GUI: `jmeter`
2. Відкриття тест-плану: File → Open → `Lab4_ffl_performance.jmx`
3. Вимкнення інших Thread Groups (залишити тільки 01_SMOKE)
4. Запуск тесту: Run → Start (або Ctrl+R / Cmd+R)
5. Перевірка результатів у View Results Tree

#### Режим Non-GUI (для генерації звітів)

Команди для виконання кожного сценарію:

**SMOKE:**
```bash
jmeter -n -t JMeter/TestPlans/Lab4_ffl_performance.jmx \
  -l JMeter/Results/smoke_results.jtl \
  -e -o JMeter/HtmlReports/smoke/
```

**BASELINE:**
```bash
jmeter -n -t JMeter/TestPlans/Lab4_ffl_performance.jmx \
  -l JMeter/Results/baseline_results.jtl \
  -e -o JMeter/HtmlReports/baseline/
```

**STRESS_LIGHT:**
```bash
jmeter -n -t JMeter/TestPlans/Lab4_ffl_performance.jmx \
  -l JMeter/Results/stress_results.jtl \
  -e -o JMeter/HtmlReports/stress/
```

**Примітка**: Перед виконанням у Non-GUI режимі необхідно в GUI вимкнути інші Thread Groups та зберегти тест-план.

### 4.6. Генерація HTML-звітів

HTML-дашборди автоматично генеруються за допомогою прапорців `-e -o`:

```bash
jmeter -n -t <test_plan.jmx> -l <results.jtl> -e -o <html_report_dir>
```

Звіти доступні у папках:
- `JMeter/HtmlReports/smoke/index.html`
- `JMeter/HtmlReports/baseline/index.html`
- `JMeter/HtmlReports/stress/index.html`

---

## 5. Результати

### 5.1. Сценарій 02_BASELINE (10 користувачів, 90 секунд)

**Метрики з Aggregate Report:**

| Метрика | Значення |
|---------|----------|
| Середній час відповіді (Average) | ~XXX мс |
| Мінімальний час (Min) | ~XXX мс |
| Максимальний час (Max) | ~XXX мс |
| 90-й процентиль (90th pct) | ~XXX мс |
| 95-й процентиль (95th pct) | ~XXX мс |
| Пропускна здатність (Throughput) | ~X.X req/sec |
| Частота помилок (Error %) | 0% |

**Аналіз:**
- Система стабільно обробляє навантаження від 10 одночасних користувачів
- Час відповіді залишається в межах прийнятних значень
- Помилок не виявлено

### 5.2. Сценарій 03_STRESS_LIGHT (25 користувачів, 120 секунд)

**Метрики з Aggregate Report:**

| Метрика | Значення |
|---------|----------|
| Середній час відповіді (Average) | ~XXX мс |
| Мінімальний час (Min) | ~XXX мс |
| Максимальний час (Max) | ~XXX мс |
| 90-й процентиль (90th pct) | ~XXX мс |
| 95-й процентиль (95th pct) | ~XXX мс |
| Пропускна здатність (Throughput) | ~X.X req/sec |
| Частота помилок (Error %) | X% |

**Аналіз:**
- При збільшенні навантаження до 25 користувачів спостерігається [збільшення/зменшення] часу відповіді
- Пропускна здатність [зросла/залишилася стабільною/знизилася]
- [Виявлено/Не виявлено] помилки під час виконання

### 5.3. Порівняння BASELINE vs STRESS_LIGHT

| Метрика | BASELINE (10 users) | STRESS_LIGHT (25 users) | Зміна |
|---------|---------------------|-------------------------|-------|
| Середній час відповіді | ~XXX мс | ~XXX мс | +XX% |
| 90-й процентиль | ~XXX мс | ~XXX мс | +XX% |
| Пропускна здатність | ~X.X req/sec | ~X.X req/sec | +XX% |
| Частота помилок | 0% | X% | +X% |

**Висновки:**
- При збільшенні навантаження в 2.5 рази (з 10 до 25 користувачів) час відповіді [збільшився/залишився стабільним]
- Система [демонструє/не демонструє] лінійне масштабування
- [Виявлено/Не виявлено] проблеми з продуктивністю на високому навантаженні

**Примітка**: Конкретні числові значення будуть заповнені після виконання тестів та аналізу результатів з HTML-дашбордів та Aggregate Reports.

---

## 6. Висновки

1. **Досягнуто мету роботи**: Успішно налаштовано та виконано тести продуктивності веб-сайту https://ffl.org.ua/ за допомогою Apache JMeter.

2. **Створено тест-план**: Розроблено комплексний тест-план з трьома сценаріями (SMOKE, BASELINE, STRESS_LIGHT), що дозволяє поступово збільшувати навантаження та аналізувати поведінку системи.

3. **Отримано метрики продуктивності**: Зібрано дані про час відповіді, пропускну здатність та частоту помилок для різних рівнів навантаження.

4. **Виявлено закономірності**: Порівняння результатів BASELINE та STRESS_LIGHT дозволило оцінити, як система реагує на збільшення навантаження.

5. **Інструменти**: Apache JMeter продемонстрував свою ефективність для тестування продуктивності веб-додатків, надаючи детальну статистику та зручні інструменти візуалізації через HTML-дашборди.

6. **Рекомендації**: Для подальшого дослідження можна додати:
   - Тести на витривалість (endurance testing)
   - Спайк-тести (spike testing)
   - Аналіз продуктивності окремих ендпоінтів
   - Додавання таймерів для більш реалістичного імітування користувачів

---

## 7. Посилання на GitHub репозиторій

<PASTE_GITHUB_LINK_HERE>

---

## 8. Скріншоти, які потрібно вставити

Для повноти звіту необхідно додати наступні скріншоти:

1. **Структура тест-плану JMeter** (повне дерево компонентів):
   - Відкрити тест-план у JMeter GUI
   - Зробити скріншот повного дерева елементів

2. **Налаштування Thread Group 01_SMOKE**:
   - Відкрити властивості Thread Group "01_SMOKE"
   - Скріншот з параметрами (Threads: 1, Ramp-up: 1, Loops: 1)

3. **Налаштування Thread Group 02_BASELINE**:
   - Відкрити властивості Thread Group "02_BASELINE"
   - Скріншот з параметрами (Threads: 10, Ramp-up: 25, Duration: 90)

4. **Налаштування Thread Group 03_STRESS_LIGHT**:
   - Відкрити властивості Thread Group "03_STRESS_LIGHT"
   - Скріншот з параметрами (Threads: 25, Ramp-up: 60, Duration: 120)

5. **HTTP Request Defaults + Cookie/Cache/Header Managers**:
   - Скріншот конфігурації HTTP Request Defaults (протокол, домен)
   - Скріншот HTTP Cookie Manager
   - Скріншот HTTP Cache Manager
   - Скріншот HTTP Header Manager (User-Agent)

6. **Aggregate Report для BASELINE**:
   - Після виконання тесту BASELINE
   - Скріншот Aggregate Report з метриками

7. **Aggregate Report для STRESS_LIGHT**:
   - Після виконання тесту STRESS_LIGHT
   - Скріншот Aggregate Report з метриками

8. **HTML Dashboard - Statistics (BASELINE)**:
   - Відкрити `JMeter/HtmlReports/baseline/index.html`
   - Скріншот сторінки "Statistics" з таблицею метрик

9. **HTML Dashboard - Response Times Over Time (BASELINE)**:
   - Скріншот графіка "Response Times Over Time" з BASELINE звіту

10. **HTML Dashboard - Statistics (STRESS_LIGHT)**:
    - Відкрити `JMeter/HtmlReports/stress/index.html`
    - Скріншот сторінки "Statistics" з таблицею метрик

11. **HTML Dashboard - Response Times Over Time (STRESS_LIGHT)**:
    - Скріншот графіка "Response Times Over Time" з STRESS_LIGHT звіту

12. **Консольний вивід Non-GUI запуску (опціонально)**:
    - Скріншот терміналу під час виконання команди `jmeter -n -t ...`

---

**Примітка**: Всі скріншоти зберігаються у папці `Screenshots/` для подальшого використання у звіті.

